import{r as h,j as e,A as z,i as G,e as q,d as Z,L as J,b as Q,E as ee,O as se,l as te,Z as re,g as ne,m as W,V as k,B as m,C as d,S as U,T as $,h as oe,u as F,f as X}from"./index-FleCPmMf.js";const _=300,K=15,ae=50,ie=70,le=1.4,Y=35,ce=55,de=75,he=1.4,H=(o,t,i,a,r)=>{if(o<0||o<i)return 0;const j=o-i;if(j<a){const u=j/a;return t*Math.sin(u*(Math.PI/2))}else if(j<a+r){const x=(j-a)/r;return t*((1+Math.cos(x*Math.PI))/2)}return 0},xe=({mData:o,vData:t,isRunning:i,simTime:a})=>{const r=h.useRef(null),j=h.useRef(null),u=h.useCallback(()=>{const x=r.current,P=j.current;if(!x||!P)return;const l=window.devicePixelRatio||1,N=P.getBoundingClientRect(),f=N.width,w=N.height;x.width=f*l,x.height=w*l,x.style.width=`${f}px`,x.style.height=`${w}px`;const s=x.getContext("2d");if(!s)return;s.scale(l,l),s.fillStyle="#000000",s.fillRect(0,0,f,w),s.strokeStyle="rgba(18, 255, 0, 0.04)",s.lineWidth=.5;const L=20;for(let n=0;n<f;n+=L)s.beginPath(),s.moveTo(n,0),s.lineTo(n,w),s.stroke();for(let n=0;n<w;n+=L)s.beginPath(),s.moveTo(0,n),s.lineTo(f,n),s.stroke();const A=50,C=30,E=40,B=60,O=f-A-C,R=w-E-B,b=E+R*.78,v=n=>A+n/_*O,I=n=>b-n/1.6*(R*.7);if(s.strokeStyle="#3b82f6",s.lineWidth=1.5,s.beginPath(),s.moveTo(A,b),s.lineTo(f-C,b),s.stroke(),o.length>0||t.length>0){const n=v(0);s.strokeStyle="#60a5fa",s.lineWidth=2,s.beginPath(),s.moveTo(n,b-8),s.lineTo(n,b+8),s.stroke(),s.fillStyle="#94a3b8",s.font="bold 10px sans-serif",s.textAlign="center",s.fillText("PS",n,b-14)}const V=(n,p,S)=>{n.length<2||(s.save(),s.strokeStyle=S,s.lineWidth=5,s.globalAlpha=.3,s.beginPath(),n.forEach((g,M)=>{const c=v(g.t),y=I(g.y);M===0?s.moveTo(c,y):s.lineTo(c,y)}),s.stroke(),s.restore(),s.strokeStyle=p,s.lineWidth=2.5,s.beginPath(),n.forEach((g,M)=>{const c=v(g.t),y=I(g.y);M===0?s.moveTo(c,y):s.lineTo(c,y)}),s.stroke())};V(t,"#60a5fa","#3b82f6"),V(o,"#1d4ed8","#1e40af");const D=(n,p,S,g)=>{if(o.length<2&&t.length<2)return;const M=v(0),c=v(n),y=b+p;s.strokeStyle=g,s.fillStyle=g,s.lineWidth=1,s.beginPath(),s.moveTo(M+5,y-3),s.lineTo(M,y),s.lineTo(M+5,y+3),s.stroke(),s.beginPath(),s.moveTo(M,y),s.lineTo(c,y),s.stroke(),s.beginPath(),s.moveTo(c-5,y-3),s.lineTo(c,y),s.lineTo(c-5,y+3),s.stroke(),s.beginPath(),s.moveTo(c,b-8),s.lineTo(c,b+8),s.stroke(),s.font="10px sans-serif",s.textAlign="left",s.fillText(S,c+4,y+4)};if(o.length>5&&D(K,18,"LP₁","#93c5fd"),t.length>5&&D(Y,34,"LP₂","#60a5fa"),o.length>20){const n=o.reduce((S,g,M,c)=>g.y>c[S].y?M:S,0),p=o[n];if(p){const S=v(p.t)-30,g=I(p.y)-15;s.fillStyle="#93c5fd",s.font="bold 13px sans-serif",s.textAlign="center",s.fillText("M-curve",S,g),s.beginPath(),s.moveTo(S+25,g+3),s.lineTo(v(p.t)-5,I(p.y)-3),s.strokeStyle="#93c5fd",s.lineWidth=1,s.stroke()}}if(t.length>20){const n=t.reduce((S,g,M,c)=>g.y>c[S].y?M:S,0),p=t[n];if(p){const S=v(p.t)+30,g=I(p.y)-15;s.fillStyle="#60a5fa",s.font="bold 13px sans-serif",s.textAlign="center",s.fillText("V-curve",S,g),s.beginPath(),s.moveTo(S-25,g+3),s.lineTo(v(p.t)+5,I(p.y)-3),s.strokeStyle="#60a5fa",s.lineWidth=1,s.stroke()}}s.fillStyle="#4ade80",s.font="bold 11px monospace",s.textAlign="right",s.fillText("CONDUCTION VELOCITY",f-C,E-10),s.fillStyle="#94a3b8",s.font="10px sans-serif",s.fillText("PS = Point of stimulus",f-C,E+5),s.fillText("LP = Latent period",f-C,E+18),i&&(s.fillStyle="#ef4444",s.font="bold 11px monospace",s.fillText(`t = ${a.toFixed(0)} ms`,f-C,E+35))},[o,t,i,a]);return h.useEffect(()=>{u()},[u]),h.useEffect(()=>{const x=j.current;if(!x)return;const P=new ResizeObserver(()=>u());return P.observe(x),()=>P.disconnect()},[u]),e.jsx("div",{ref:j,className:"w-full h-full",children:e.jsx("canvas",{ref:r,className:"w-full h-full"})})},T=({label:o,children:t,onHoverChange:i})=>e.jsx("group",{onPointerOver:a=>{i&&(a.stopPropagation(),i(o),document.body.style.cursor="pointer")},onPointerOut:a=>{i&&(i(null),document.body.style.cursor="auto")},children:t}),ue=({position:o,rotationTarget:t,slideTarget:i})=>{const a=h.useRef(null),r=h.useRef(null);return F((j,u)=>{a.current&&(a.current.rotation.x=X.lerp(a.current.rotation.x,t,u*5)),r.current&&(r.current.position.y=X.lerp(r.current.position.y,i,u*5))}),e.jsxs("group",{position:o,children:[e.jsxs("group",{position:[0,.15,0],children:[e.jsx(m,{args:[.02,.3,.08],position:[-.035,0,0],children:e.jsx("meshStandardMaterial",{color:"#654321",metalness:.7,roughness:.4})}),e.jsx(m,{args:[.02,.3,.08],position:[.035,0,0],children:e.jsx("meshStandardMaterial",{color:"#654321",metalness:.7,roughness:.4})}),e.jsx(d,{args:[.015,.015,.1],rotation:[0,0,Math.PI/2],position:[0,.05,0],children:e.jsx("meshStandardMaterial",{color:"#c0c0c0",metalness:.8})})]}),e.jsxs("group",{ref:a,position:[0,.2,0],children:[e.jsx(U,{args:[.035,16,16],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.8,roughness:.2})}),e.jsxs("group",{ref:r,children:[e.jsx(d,{args:[.015,.015,.9],position:[0,.1,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.7,roughness:.2})}),e.jsxs("group",{position:[0,.55,0],children:[e.jsx(d,{args:[.025,.02,.12],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:"#f0f0f0",roughness:.3})}),e.jsx(U,{args:[.025,16,16],position:[0,.06,0],children:e.jsx("meshStandardMaterial",{color:"#f0f0f0",roughness:.3})})]}),e.jsxs("group",{position:[0,-.35,0],children:[e.jsx(d,{args:[.005,.015,.2],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.7,roughness:.2})}),e.jsx(d,{args:[.004,.004,.15],position:[0,-.15,0],children:e.jsx("meshStandardMaterial",{color:"#e2e8f0",metalness:.9})}),e.jsx("group",{position:[0,-.22,0],rotation:[1.5,0,0],children:e.jsx(d,{args:[.003,.003,.04],position:[0,-.02,.002],children:e.jsx("meshStandardMaterial",{color:"#e2e8f0",metalness:.9})})})]})]})]})]})},ge=({muscleShortening:o,onHoverChange:t})=>{const i=h.useMemo(()=>new W([new k(-.7,.2,0),new k(-.7,.46,.3),new k(-.7,.45,.4),new k(-.9,.445,.4),new k(-.92,.3,.4)]),[]);return e.jsx(T,{label:"Lucas Chamber & Muscle",onHoverChange:t,children:e.jsxs("group",{position:[-2,0,0],children:[e.jsxs("group",{position:[0,-.5,0],children:[e.jsx(m,{args:[3.2,.2,1.5],position:[0,-.1,0],children:e.jsx("meshPhysicalMaterial",{color:"#cbd5e1",roughness:.1,transmission:.2,thickness:.5})}),e.jsx(m,{args:[3.2,1,.1],position:[0,.5,.7],children:e.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.95,opacity:1,roughness:0,thickness:.1,clearcoat:1})}),e.jsx(m,{args:[3.2,1,.1],position:[0,.5,-.7],children:e.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.95,opacity:1,roughness:0,thickness:.1,clearcoat:1})}),e.jsx(m,{args:[.1,1,1.3],position:[1.55,.5,0],children:e.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.95,opacity:1,roughness:0,thickness:.1,clearcoat:1})}),e.jsx(m,{args:[.1,1,1.3],position:[-1.55,.5,0],children:e.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.95,opacity:1,roughness:0,thickness:.1,clearcoat:1})}),e.jsx(m,{args:[3,.8,1.3],position:[0,.4,0],children:e.jsx("meshPhysicalMaterial",{color:"#a5f3fc",transmission:.9,opacity:.6,transparent:!0,roughness:.1,ior:1.33})})]}),e.jsxs("group",{position:[0,.2,0],children:[e.jsx(d,{args:[.05,.05,.8],rotation:[0,0,1.57],position:[-1.2,0,0],children:e.jsx("meshStandardMaterial",{color:"#94a3b8"})}),e.jsx("group",{position:[-1.2,0,0],children:e.jsxs("group",{scale:[1-o*.15,1+o*.3,1+o*.3],position:[1,0,0],children:[e.jsx(U,{args:[.3,16,16],scale:[3,1,1],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:"#be123c",roughness:.6})}),e.jsx(m,{args:[1.2,.05,.05],position:[1.4,0,0],children:e.jsx("meshStandardMaterial",{color:"#f1f5f9"})})]})})]}),e.jsx(T,{label:"Stimulating Electrodes",onHoverChange:t,children:e.jsxs("group",{position:[-.8,.73,.7],rotation:[0,0,0],children:[e.jsxs("group",{position:[0,-.25,0],children:[e.jsxs("group",{children:[e.jsx(m,{args:[.3,.08,.2],position:[0,.06,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.6,roughness:.3})}),e.jsx(m,{args:[.3,.12,.06],position:[0,-.04,-.07],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.6,roughness:.3})}),e.jsx(m,{args:[.3,.12,.06],position:[0,-.04,.07],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.6,roughness:.3})})]}),e.jsxs("group",{position:[0,0,.1],rotation:[Math.PI/2,0,0],children:[e.jsx(d,{args:[.04,.04,.1],position:[0,.05,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.6,roughness:.3})}),e.jsx(d,{args:[.06,.06,.05],position:[0,.12,0],children:e.jsx("meshStandardMaterial",{color:"#111111",roughness:.7})})]})]}),e.jsx(m,{args:[.6,.12,.2],position:[0,-.09,0],children:e.jsx("meshStandardMaterial",{color:"#1e1e1e",roughness:.8})}),[-.22,.22].map((a,r)=>e.jsxs("group",{position:[a,.05,0],children:[e.jsx(d,{args:[.03,.03,.15],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.8,roughness:.2})}),e.jsx(d,{args:[.045,.045,.06],position:[0,.05,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.8,roughness:.2})})]},`post-${r}`)),[-.08,.08].map((a,r)=>e.jsx(ue,{position:[a,0,0],rotationTarget:.52,slideTarget:0},`unit-${r}`)),e.jsx($,{args:[new W([new k(-.22,.08,0),new k(-.25,.2,.1),new k(-.35,.2,.3)]),20,.008,8,!1],children:e.jsx("meshStandardMaterial",{color:"#dc2626"})}),e.jsx($,{args:[new W([new k(.22,.08,0),new k(.25,.2,.1),new k(.35,.2,.3)]),20,.008,8,!1],children:e.jsx("meshStandardMaterial",{color:"#1f1f1f"})})]})}),e.jsx(T,{label:"Sciatic Nerve",onHoverChange:t,children:e.jsx($,{args:[i,64,.012,8,!1],children:e.jsx("meshStandardMaterial",{color:"#fefce8",emissive:"#fefce8",emissiveIntensity:.15,roughness:.3})})})]})})},me=({mode:o})=>{const t=h.useRef(null),i="#c0c0c0",a=o==="Free-Loaded"?.2:.05;return F((r,j)=>{t.current&&(t.current.position.y=X.lerp(t.current.position.y,a,j*5))}),e.jsx("group",{position:[.1,0,-.15],rotation:[0,0,Math.PI/4],children:e.jsxs("group",{ref:t,children:[e.jsx(d,{args:[.025,.025,.25],position:[0,.125,0],children:e.jsx("meshStandardMaterial",{color:i,metalness:.9,roughness:.15})}),e.jsx(d,{args:[.05,.05,.06],position:[0,.28,0],children:e.jsx("meshStandardMaterial",{color:i,metalness:.85,roughness:.25})}),e.jsx(m,{args:[.07,.01,.015],position:[0,.311,0],children:e.jsx("meshStandardMaterial",{color:"#1a1a1a"})})]})})},fe=({angle:o,onHoverChange:t})=>{const i="#b8860b",a="#8b6914",r="#c0c0c0";return e.jsxs("group",{position:[-.5,1.5,.1],children:[e.jsxs("group",{position:[.3,-1.9,0],children:[e.jsx(T,{label:"Stand (Upright Post)",onHoverChange:t,children:e.jsxs("group",{position:[0,-1.5,0],children:[e.jsx(m,{args:[.6,.1,.4],position:[0,-.05,0],children:e.jsx("meshStandardMaterial",{color:a,metalness:.7,roughness:.3})}),e.jsx(d,{args:[.08,.1,2.8],position:[0,1.35,0],children:e.jsx("meshStandardMaterial",{color:r,metalness:.8,roughness:.2})})]})}),e.jsx(T,{label:"Adjustment Screw",onHoverChange:t,children:e.jsxs("group",{position:[0,1.35,0],children:[e.jsx(d,{args:[.06,.06,.3],children:e.jsx("meshStandardMaterial",{color:r,metalness:.9,roughness:.1})}),e.jsx(d,{args:[.1,.1,.15],position:[0,.22,0],children:e.jsx("meshStandardMaterial",{color:r,metalness:.8,roughness:.3})})]})})]}),e.jsxs("group",{position:[-.4,-.8,0],rotation:[0,0,-Math.PI/2],children:[e.jsx(T,{label:"Frame Support",onHoverChange:t,children:e.jsx(m,{args:[.12,.3,.08],position:[0,.05,-1.11],children:e.jsx("meshStandardMaterial",{color:i,metalness:.7,roughness:.3})})}),e.jsx(T,{label:"Frame Support",onHoverChange:t,children:e.jsx(m,{args:[.12,.3,.08],position:[0,.05,.11],children:e.jsx("meshStandardMaterial",{color:i,metalness:.7,roughness:.3})})}),e.jsx(T,{label:"Frame Support",onHoverChange:t,children:e.jsx(m,{args:[.12,.1,1.3],position:[0,.15,-.5],children:e.jsx("meshStandardMaterial",{color:i,metalness:.7,roughness:.3})})}),e.jsx(T,{label:"After Load Screw",onHoverChange:t,children:e.jsx(me,{mode:"Free-Loaded"})}),e.jsx(T,{label:"Pivot Bolt (Fulcrum)",onHoverChange:t,children:e.jsxs("group",{children:[e.jsx(d,{args:[.04,.04,1.4],rotation:[Math.PI/2,0,0],position:[0,0,-.5],children:e.jsx("meshStandardMaterial",{color:r,metalness:.9,roughness:.1})}),e.jsx(d,{args:[.06,.06,.03],rotation:[Math.PI/2,0,0],position:[0,0,.21],children:e.jsx("meshStandardMaterial",{color:r,metalness:.9,roughness:.1})})]})}),e.jsx(T,{label:"Nut (Pivot Bolt)",onHoverChange:t,children:e.jsx(d,{args:[.06,.06,.03],rotation:[Math.PI/2,0,0],position:[0,0,-1.21],children:e.jsx("meshStandardMaterial",{color:r,metalness:.9,roughness:.1})})}),e.jsxs("group",{rotation:[0,0,-o],children:[e.jsx(T,{label:"Writing Lever",onHoverChange:t,children:e.jsx("group",{rotation:[0,Math.PI,-Math.PI/2],children:e.jsxs("group",{position:[.55,0,1],children:[e.jsx(m,{args:[1.125,.08,.05],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:i,metalness:.6,roughness:.4})}),[-.3,-.05,.2,.45].map((u,x)=>e.jsx(d,{args:[.02,.02,.052],rotation:[Math.PI/2,0,0],position:[u,0,0],children:e.jsx("meshStandardMaterial",{color:"#1a1a1a"})},x))]})})}),e.jsx(T,{label:"Muscle Hook",onHoverChange:t,children:e.jsxs("group",{position:[0,0,-.15],rotation:[0,0,1.7],children:[e.jsx(d,{args:[.015,.015,.6],position:[0,-.3,0],children:e.jsx("meshStandardMaterial",{color:r,metalness:.8,roughness:.2})}),e.jsx(d,{args:[.015,.015,.15],position:[.05,-.6,0],rotation:[0,0,.8],children:e.jsx("meshStandardMaterial",{color:r,metalness:.8,roughness:.2})})]})}),e.jsx(T,{label:"Writing Point (Stylus)",onHoverChange:t,children:e.jsx("group",{position:[0,-1.1,-1],children:e.jsx(d,{args:[.012,.005,2.8],rotation:[0,0,0],position:[0,-.6,0],children:e.jsx("meshStandardMaterial",{color:"#1a1a1a"})})})})]})]})]})},je=({simTime:o,tension:t,isRunning:i,onHoverChange:a,resetKey:r})=>{const j=h.useRef(document.createElement("canvas")),u=h.useRef(null),x=h.useMemo(()=>{const l=j.current;l.width=1024,l.height=512;const N=l.getContext("2d");return N&&(N.fillStyle="#000",N.fillRect(0,0,1024,512)),new oe(l)},[]);h.useEffect(()=>{const l=j.current.getContext("2d");l&&(l.fillStyle="#000",l.fillRect(0,0,1024,512),x.needsUpdate=!0),u.current=null},[r,x]),F(()=>{if(!i){u.current=null;return}const l=j.current.getContext("2d");if(!l)return;const f=1024*(Math.PI/4/(2*Math.PI)),w=50+o/_*f,s=512*.5-t*80;u.current&&(l.strokeStyle="#fff",l.lineWidth=3,l.beginPath(),l.moveTo(u.current.x,u.current.y),l.lineTo(w,s),l.stroke(),x.needsUpdate=!0),u.current={x:w,y:s}});const P=h.useRef(null);return F(()=>{if(P.current&&i){const N=o/_*(Math.PI/4);P.current.rotation.y=1.5-N}}),e.jsx(T,{label:"Kymograph",onHoverChange:a,children:e.jsxs("group",{position:[-2.071,.7,4.28],children:[e.jsx("group",{ref:P,rotation:[0,1.5,0],children:e.jsxs(d,{args:[1.2,1.2,3,64],children:[e.jsx("meshBasicMaterial",{attach:"material-0",map:x}),e.jsx("meshStandardMaterial",{attach:"material-1",color:"#111"}),e.jsx("meshStandardMaterial",{attach:"material-2",color:"#111"})]})}),e.jsx(d,{args:[.1,.1,4.5],position:[0,-.25,0],children:e.jsx("meshStandardMaterial",{color:"#1e293b"})}),e.jsx(m,{args:[1.5,.5,2],position:[0,-2.25,0],children:e.jsx("meshStandardMaterial",{color:"#0f172a"})})]})})},be=({onBack:o})=>{const[t,i]=h.useState(3.5),[a,r]=h.useState(null),[j,u]=h.useState(0),[x,P]=h.useState("3d"),[l,N]=h.useState("#CBD5E1"),[f,w]=h.useState("muscle"),[s,L]=h.useState({time:0,isRunning:!1,mData:[],vData:[],currentMHeight:0,currentVHeight:0}),A=h.useRef(),C=h.useRef("muscle"),E=()=>{s.isRunning||(C.current=f,L(R=>({time:0,isRunning:!0,mData:f==="muscle"?[]:R.mData,vData:f==="vertebral"?[]:R.vData,currentMHeight:0,currentVHeight:0})))},B=()=>{L({time:0,isRunning:!1,mData:[],vData:[],currentMHeight:0,currentVHeight:0}),u(R=>R+1)};h.useEffect(()=>{if(!s.isRunning){A.current&&cancelAnimationFrame(A.current);return}let R=Date.now(),b=s.time;const v=C.current,I=Math.min(t/4,1),V=le*I,D=he*I,n=()=>{const p=Date.now(),S=p-R;if(R=p,b+=S*.2,b>_){L(c=>({...c,isRunning:!1,time:_,currentMHeight:0,currentVHeight:0}));return}const g=v==="muscle"?H(b,V,K,ae,ie):0,M=v==="vertebral"?H(b,D,Y,ce,de):0;L(c=>({...c,time:b,currentMHeight:g,currentVHeight:M,mData:v==="muscle"?[...c.mData,{t:b,y:g}]:c.mData,vData:v==="vertebral"?[...c.vData,{t:b,y:M}]:c.vData})),A.current=requestAnimationFrame(n)};return A.current=requestAnimationFrame(n),()=>{A.current&&cancelAnimationFrame(A.current)}},[s.isRunning,t]);const O=Math.max(s.currentMHeight,s.currentVHeight);return e.jsxs("div",{className:"flex flex-col h-screen bg-slate-950 text-slate-100 font-sans",children:[e.jsxs("header",{className:"flex items-center justify-between px-6 py-4 bg-slate-900 border-b border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-800 rounded-lg text-slate-400",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-cyan-500 bg-clip-text text-transparent",children:"Conduction Velocity"}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Sciatic Nerve — Frog"})]})]}),e.jsx("button",{onClick:()=>N(R=>R==="#CBD5E1"?"#2F3E46":"#CBD5E1"),className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-slate-300 border border-slate-700 transition-colors flex items-center justify-center",title:"Toggle Canvas Background",children:l==="#CBD5E1"?e.jsx(G,{className:"w-5 h-5"}):e.jsx(q,{className:"w-5 h-5"})})]}),e.jsxs("main",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[e.jsxs("div",{className:"lg:hidden flex bg-slate-800 border-b border-slate-700",children:[e.jsxs("button",{onClick:()=>P("3d"),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 font-medium transition-all ${x==="3d"?"bg-slate-900 text-blue-400 border-b-2 border-blue-400":"text-slate-400 hover:text-slate-200"}`,children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:"3D View"})]}),e.jsxs("button",{onClick:()=>P("graph"),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 font-medium transition-all ${x==="graph"?"bg-slate-900 text-blue-400 border-b-2 border-blue-400":"text-slate-400 hover:text-slate-200"}`,children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:"Graph View"})]})]}),e.jsxs("div",{className:`flex-1 relative bg-black ${x==="graph"?"hidden lg:flex":"flex"}`,children:[e.jsxs(Q,{shadows:!0,camera:{position:[2.95,4.04,8.23],fov:35},children:[e.jsx("color",{attach:"background",args:[l]}),e.jsx(ee,{preset:"city"}),e.jsx("ambientLight",{intensity:.6,color:"#ffffff"}),e.jsx("spotLight",{position:[10,10,5],angle:.3,penumbra:.5,intensity:2,castShadow:!0}),e.jsxs("group",{position:[0,-1,0],children:[e.jsxs("group",{rotation:[0,Math.PI/2,0],children:[e.jsx(ge,{muscleShortening:O,onHoverChange:r}),e.jsx(fe,{angle:O*.15,onHoverChange:r})]}),e.jsx(je,{simTime:s.time,tension:O,isRunning:s.isRunning,onHoverChange:r,resetKey:j})]}),e.jsx(se,{makeDefault:!0,target:[-.74,-.6,3.39],minPolarAngle:0})]}),a&&e.jsx("div",{className:"absolute top-4 left-4 bg-slate-900/90 text-white px-3 py-1.5 rounded-full text-sm border border-slate-700 backdrop-blur-sm pointer-events-none animate-in fade-in duration-200",children:a})]}),e.jsxs("div",{className:"w-full lg:w-[450px] bg-slate-900 border-l border-slate-800 flex flex-col flex-1 lg:flex-none",children:[e.jsxs("div",{className:`flex-1 p-6 min-h-0 flex flex-col border-b border-slate-800 ${x==="3d"?"hidden lg:flex":"flex"}`,children:[e.jsx("h3",{className:"text-slate-400 text-sm font-bold uppercase tracking-wider mb-4",children:"Kymograph Record"}),e.jsx("div",{className:"flex-1 bg-black rounded-lg border border-slate-800 overflow-hidden relative",children:e.jsx(xe,{mData:s.mData,vData:s.vData,isRunning:s.isRunning,simTime:s.time})})]}),e.jsx("div",{className:"p-6 bg-slate-900 z-10",children:e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-xl",children:[e.jsxs("h2",{className:"text-slate-200 text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-blue-400"}),"Stimulator Control"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-slate-400 text-sm font-medium mb-2 block",children:"Stimulation Point"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>w("muscle"),disabled:s.isRunning,className:`py-2 px-3 rounded-lg text-sm font-semibold transition-all border ${f==="muscle"?"bg-blue-600/20 border-blue-500 text-blue-300":"bg-slate-700/50 border-slate-600 text-slate-400 hover:border-slate-500"}`,children:"Muscle End"}),e.jsx("button",{onClick:()=>w("vertebral"),disabled:s.isRunning,className:`py-2 px-3 rounded-lg text-sm font-semibold transition-all border ${f==="vertebral"?"bg-blue-600/20 border-blue-500 text-blue-300":"bg-slate-700/50 border-slate-600 text-slate-400 hover:border-slate-500"}`,children:"Vertebral End"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:E,disabled:s.isRunning,className:`
                                            flex items-center justify-center gap-2 py-3 rounded-lg font-bold transition-all
                                            ${s.isRunning?"bg-blue-900/50 text-blue-500/50 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white shadow-[0_0_15px_rgba(59,130,246,0.4)] hover:shadow-[0_0_25px_rgba(59,130,246,0.6)] active:scale-95"}
                                        `,children:[e.jsx(re,{className:`w-5 h-5 ${s.isRunning?"":"fill-current"}`}),s.isRunning?"Running...":"STIMULATE"]}),e.jsxs("button",{onClick:B,disabled:s.isRunning,className:"flex items-center justify-center gap-2 py-3 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg font-medium transition-colors",children:[e.jsx(ne,{className:"w-4 h-4"}),"Reset"]})]})]})]})})]})]})]})};export{be as ConductionVelocity};
