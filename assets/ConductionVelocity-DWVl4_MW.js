import{r as u,j as e,A as z,d as G,L as q,b as Z,E as J,O as Q,i as ee,Z as se,f as te,k as D,V as N,B as m,C as h,S as X,T as U,g as re,u as $,e as B}from"./index-CkBOMvgS.js";const W=300,K=15,ne=50,oe=70,ae=1.4,Y=35,ie=55,le=75,ce=1.4,H=(o,t,c,i,n)=>{if(o<0||o<c)return 0;const f=o-c;if(f<i){const g=f/i;return t*Math.sin(g*(Math.PI/2))}else if(f<i+n){const x=(f-i)/n;return t*((1+Math.cos(x*Math.PI))/2)}return 0},de=({mData:o,vData:t,isRunning:c,simTime:i})=>{const n=u.useRef(null),f=u.useRef(null),g=u.useCallback(()=>{const x=n.current,T=f.current;if(!x||!T)return;const l=window.devicePixelRatio||1,v=T.getBoundingClientRect(),r=v.width,y=v.height;x.width=r*l,x.height=y*l,x.style.width=`${r}px`,x.style.height=`${y}px`;const s=x.getContext("2d");if(!s)return;s.scale(l,l),s.fillStyle="#000000",s.fillRect(0,0,r,y),s.strokeStyle="rgba(18, 255, 0, 0.04)",s.lineWidth=.5;const E=20;for(let a=0;a<r;a+=E)s.beginPath(),s.moveTo(a,0),s.lineTo(a,y),s.stroke();for(let a=0;a<y;a+=E)s.beginPath(),s.moveTo(0,a),s.lineTo(r,a),s.stroke();const _=50,C=30,k=40,A=60,I=r-_-C,O=y-k-A,P=k+O*.78,w=a=>_+a/W*I,L=a=>P-a/1.6*(O*.7);if(s.strokeStyle="#3b82f6",s.lineWidth=1.5,s.beginPath(),s.moveTo(_,P),s.lineTo(r-C,P),s.stroke(),o.length>0||t.length>0){const a=w(0);s.strokeStyle="#60a5fa",s.lineWidth=2,s.beginPath(),s.moveTo(a,P-8),s.lineTo(a,P+8),s.stroke(),s.fillStyle="#94a3b8",s.font="bold 10px sans-serif",s.textAlign="center",s.fillText("PS",a,P-14)}const V=(a,p,j)=>{a.length<2||(s.save(),s.strokeStyle=j,s.lineWidth=5,s.globalAlpha=.3,s.beginPath(),a.forEach((d,R)=>{const b=w(d.t),S=L(d.y);R===0?s.moveTo(b,S):s.lineTo(b,S)}),s.stroke(),s.restore(),s.strokeStyle=p,s.lineWidth=2.5,s.beginPath(),a.forEach((d,R)=>{const b=w(d.t),S=L(d.y);R===0?s.moveTo(b,S):s.lineTo(b,S)}),s.stroke())};V(t,"#60a5fa","#3b82f6"),V(o,"#1d4ed8","#1e40af");const F=(a,p,j,d)=>{if(o.length<2&&t.length<2)return;const R=w(0),b=w(a),S=P+p;s.strokeStyle=d,s.fillStyle=d,s.lineWidth=1,s.beginPath(),s.moveTo(R+5,S-3),s.lineTo(R,S),s.lineTo(R+5,S+3),s.stroke(),s.beginPath(),s.moveTo(R,S),s.lineTo(b,S),s.stroke(),s.beginPath(),s.moveTo(b-5,S-3),s.lineTo(b,S),s.lineTo(b-5,S+3),s.stroke(),s.beginPath(),s.moveTo(b,P-8),s.lineTo(b,P+8),s.stroke(),s.font="10px sans-serif",s.textAlign="left",s.fillText(j,b+4,S+4)};if(o.length>5&&F(K,18,"LP₁","#93c5fd"),t.length>5&&F(Y,34,"LP₂","#60a5fa"),o.length>20){const a=o.reduce((j,d,R,b)=>d.y>b[j].y?R:j,0),p=o[a];if(p){const j=w(p.t)-30,d=L(p.y)-15;s.fillStyle="#93c5fd",s.font="bold 13px sans-serif",s.textAlign="center",s.fillText("M-curve",j,d),s.beginPath(),s.moveTo(j+25,d+3),s.lineTo(w(p.t)-5,L(p.y)-3),s.strokeStyle="#93c5fd",s.lineWidth=1,s.stroke()}}if(t.length>20){const a=t.reduce((j,d,R,b)=>d.y>b[j].y?R:j,0),p=t[a];if(p){const j=w(p.t)+30,d=L(p.y)-15;s.fillStyle="#60a5fa",s.font="bold 13px sans-serif",s.textAlign="center",s.fillText("V-curve",j,d),s.beginPath(),s.moveTo(j-25,d+3),s.lineTo(w(p.t)+5,L(p.y)-3),s.strokeStyle="#60a5fa",s.lineWidth=1,s.stroke()}}s.fillStyle="#4ade80",s.font="bold 11px monospace",s.textAlign="right",s.fillText("CONDUCTION VELOCITY",r-C,k-10),s.fillStyle="#94a3b8",s.font="10px sans-serif",s.fillText("PS = Point of stimulus",r-C,k+5),s.fillText("LP = Latent period",r-C,k+18),c&&(s.fillStyle="#ef4444",s.font="bold 11px monospace",s.fillText(`t = ${i.toFixed(0)} ms`,r-C,k+35))},[o,t,c,i]);return u.useEffect(()=>{g()},[g]),u.useEffect(()=>{const x=f.current;if(!x)return;const T=new ResizeObserver(()=>g());return T.observe(x),()=>T.disconnect()},[g]),e.jsx("div",{ref:f,className:"w-full h-full",children:e.jsx("canvas",{ref:n,className:"w-full h-full"})})},M=({label:o,children:t,onHoverChange:c})=>e.jsx("group",{onPointerOver:i=>{c&&(i.stopPropagation(),c(o),document.body.style.cursor="pointer")},onPointerOut:i=>{c&&(c(null),document.body.style.cursor="auto")},children:t}),he=({position:o,rotationTarget:t,slideTarget:c})=>{const i=u.useRef(null),n=u.useRef(null);return $((f,g)=>{i.current&&(i.current.rotation.x=B.lerp(i.current.rotation.x,t,g*5)),n.current&&(n.current.position.y=B.lerp(n.current.position.y,c,g*5))}),e.jsxs("group",{position:o,children:[e.jsxs("group",{position:[0,.15,0],children:[e.jsx(m,{args:[.02,.3,.08],position:[-.035,0,0],children:e.jsx("meshStandardMaterial",{color:"#654321",metalness:.7,roughness:.4})}),e.jsx(m,{args:[.02,.3,.08],position:[.035,0,0],children:e.jsx("meshStandardMaterial",{color:"#654321",metalness:.7,roughness:.4})}),e.jsx(h,{args:[.015,.015,.1],rotation:[0,0,Math.PI/2],position:[0,.05,0],children:e.jsx("meshStandardMaterial",{color:"#c0c0c0",metalness:.8})})]}),e.jsxs("group",{ref:i,position:[0,.2,0],children:[e.jsx(X,{args:[.035,16,16],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.8,roughness:.2})}),e.jsxs("group",{ref:n,children:[e.jsx(h,{args:[.015,.015,.9],position:[0,.1,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.7,roughness:.2})}),e.jsxs("group",{position:[0,.55,0],children:[e.jsx(h,{args:[.025,.02,.12],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:"#f0f0f0",roughness:.3})}),e.jsx(X,{args:[.025,16,16],position:[0,.06,0],children:e.jsx("meshStandardMaterial",{color:"#f0f0f0",roughness:.3})})]}),e.jsxs("group",{position:[0,-.35,0],children:[e.jsx(h,{args:[.005,.015,.2],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.7,roughness:.2})}),e.jsx(h,{args:[.004,.004,.15],position:[0,-.15,0],children:e.jsx("meshStandardMaterial",{color:"#e2e8f0",metalness:.9})}),e.jsx("group",{position:[0,-.22,0],rotation:[1.5,0,0],children:e.jsx(h,{args:[.003,.003,.04],position:[0,-.02,.002],children:e.jsx("meshStandardMaterial",{color:"#e2e8f0",metalness:.9})})})]})]})]})]})},xe=({muscleShortening:o,onHoverChange:t})=>{const c=u.useMemo(()=>new D([new N(-.7,.2,0),new N(-.7,.46,.3),new N(-.7,.45,.4),new N(-.9,.445,.4),new N(-.92,.3,.4)]),[]);return e.jsx(M,{label:"Lucas Chamber & Muscle",onHoverChange:t,children:e.jsxs("group",{position:[-2,0,0],children:[e.jsxs("group",{position:[0,-.5,0],children:[e.jsx(m,{args:[3.2,.2,1.5],position:[0,-.1,0],children:e.jsx("meshPhysicalMaterial",{color:"#cbd5e1",roughness:.1,transmission:.2,thickness:.5})}),e.jsx(m,{args:[3.2,1,.1],position:[0,.5,.7],children:e.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.95,opacity:1,roughness:0,thickness:.1,clearcoat:1})}),e.jsx(m,{args:[3.2,1,.1],position:[0,.5,-.7],children:e.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.95,opacity:1,roughness:0,thickness:.1,clearcoat:1})}),e.jsx(m,{args:[.1,1,1.3],position:[1.55,.5,0],children:e.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.95,opacity:1,roughness:0,thickness:.1,clearcoat:1})}),e.jsx(m,{args:[.1,1,1.3],position:[-1.55,.5,0],children:e.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.95,opacity:1,roughness:0,thickness:.1,clearcoat:1})}),e.jsx(m,{args:[3,.8,1.3],position:[0,.4,0],children:e.jsx("meshPhysicalMaterial",{color:"#a5f3fc",transmission:.9,opacity:.6,transparent:!0,roughness:.1,ior:1.33})})]}),e.jsxs("group",{position:[0,.2,0],children:[e.jsx(h,{args:[.05,.05,.8],rotation:[0,0,1.57],position:[-1.2,0,0],children:e.jsx("meshStandardMaterial",{color:"#94a3b8"})}),e.jsx("group",{position:[-1.2,0,0],children:e.jsxs("group",{scale:[1-o*.15,1+o*.3,1+o*.3],position:[1,0,0],children:[e.jsx(X,{args:[.3,16,16],scale:[3,1,1],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:"#be123c",roughness:.6})}),e.jsx(m,{args:[1.2,.05,.05],position:[1.4,0,0],children:e.jsx("meshStandardMaterial",{color:"#f1f5f9"})})]})})]}),e.jsx(M,{label:"Stimulating Electrodes",onHoverChange:t,children:e.jsxs("group",{position:[-.8,.73,.7],rotation:[0,0,0],children:[e.jsxs("group",{position:[0,-.25,0],children:[e.jsxs("group",{children:[e.jsx(m,{args:[.3,.08,.2],position:[0,.06,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.6,roughness:.3})}),e.jsx(m,{args:[.3,.12,.06],position:[0,-.04,-.07],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.6,roughness:.3})}),e.jsx(m,{args:[.3,.12,.06],position:[0,-.04,.07],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.6,roughness:.3})})]}),e.jsxs("group",{position:[0,0,.1],rotation:[Math.PI/2,0,0],children:[e.jsx(h,{args:[.04,.04,.1],position:[0,.05,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.6,roughness:.3})}),e.jsx(h,{args:[.06,.06,.05],position:[0,.12,0],children:e.jsx("meshStandardMaterial",{color:"#111111",roughness:.7})})]})]}),e.jsx(m,{args:[.6,.12,.2],position:[0,-.09,0],children:e.jsx("meshStandardMaterial",{color:"#1e1e1e",roughness:.8})}),[-.22,.22].map((i,n)=>e.jsxs("group",{position:[i,.05,0],children:[e.jsx(h,{args:[.03,.03,.15],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.8,roughness:.2})}),e.jsx(h,{args:[.045,.045,.06],position:[0,.05,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.8,roughness:.2})})]},`post-${n}`)),[-.08,.08].map((i,n)=>e.jsx(he,{position:[i,0,0],rotationTarget:.52,slideTarget:0},`unit-${n}`)),e.jsx(U,{args:[new D([new N(-.22,.08,0),new N(-.25,.2,.1),new N(-.35,.2,.3)]),20,.008,8,!1],children:e.jsx("meshStandardMaterial",{color:"#dc2626"})}),e.jsx(U,{args:[new D([new N(.22,.08,0),new N(.25,.2,.1),new N(.35,.2,.3)]),20,.008,8,!1],children:e.jsx("meshStandardMaterial",{color:"#1f1f1f"})})]})}),e.jsx(M,{label:"Sciatic Nerve",onHoverChange:t,children:e.jsx(U,{args:[c,64,.012,8,!1],children:e.jsx("meshStandardMaterial",{color:"#fefce8",emissive:"#fefce8",emissiveIntensity:.15,roughness:.3})})})]})})},ue=({mode:o})=>{const t=u.useRef(null),c="#c0c0c0",i=o==="Free-Loaded"?.2:.05;return $((n,f)=>{t.current&&(t.current.position.y=B.lerp(t.current.position.y,i,f*5))}),e.jsx("group",{position:[.1,0,-.15],rotation:[0,0,Math.PI/4],children:e.jsxs("group",{ref:t,children:[e.jsx(h,{args:[.025,.025,.25],position:[0,.125,0],children:e.jsx("meshStandardMaterial",{color:c,metalness:.9,roughness:.15})}),e.jsx(h,{args:[.05,.05,.06],position:[0,.28,0],children:e.jsx("meshStandardMaterial",{color:c,metalness:.85,roughness:.25})}),e.jsx(m,{args:[.07,.01,.015],position:[0,.311,0],children:e.jsx("meshStandardMaterial",{color:"#1a1a1a"})})]})})},ge=({angle:o,onHoverChange:t})=>{const c="#b8860b",i="#8b6914",n="#c0c0c0";return e.jsxs("group",{position:[-.5,1.5,.1],children:[e.jsxs("group",{position:[.3,-1.9,0],children:[e.jsx(M,{label:"Stand (Upright Post)",onHoverChange:t,children:e.jsxs("group",{position:[0,-1.5,0],children:[e.jsx(m,{args:[.6,.1,.4],position:[0,-.05,0],children:e.jsx("meshStandardMaterial",{color:i,metalness:.7,roughness:.3})}),e.jsx(h,{args:[.08,.1,2.8],position:[0,1.35,0],children:e.jsx("meshStandardMaterial",{color:n,metalness:.8,roughness:.2})})]})}),e.jsx(M,{label:"Adjustment Screw",onHoverChange:t,children:e.jsxs("group",{position:[0,1.35,0],children:[e.jsx(h,{args:[.06,.06,.3],children:e.jsx("meshStandardMaterial",{color:n,metalness:.9,roughness:.1})}),e.jsx(h,{args:[.1,.1,.15],position:[0,.22,0],children:e.jsx("meshStandardMaterial",{color:n,metalness:.8,roughness:.3})})]})})]}),e.jsxs("group",{position:[-.4,-.8,0],rotation:[0,0,-Math.PI/2],children:[e.jsx(M,{label:"Frame Support",onHoverChange:t,children:e.jsx(m,{args:[.12,.3,.08],position:[0,.05,-1.11],children:e.jsx("meshStandardMaterial",{color:c,metalness:.7,roughness:.3})})}),e.jsx(M,{label:"Frame Support",onHoverChange:t,children:e.jsx(m,{args:[.12,.3,.08],position:[0,.05,.11],children:e.jsx("meshStandardMaterial",{color:c,metalness:.7,roughness:.3})})}),e.jsx(M,{label:"Frame Support",onHoverChange:t,children:e.jsx(m,{args:[.12,.1,1.3],position:[0,.15,-.5],children:e.jsx("meshStandardMaterial",{color:c,metalness:.7,roughness:.3})})}),e.jsx(M,{label:"After Load Screw",onHoverChange:t,children:e.jsx(ue,{mode:"Free-Loaded"})}),e.jsx(M,{label:"Pivot Bolt (Fulcrum)",onHoverChange:t,children:e.jsxs("group",{children:[e.jsx(h,{args:[.04,.04,1.4],rotation:[Math.PI/2,0,0],position:[0,0,-.5],children:e.jsx("meshStandardMaterial",{color:n,metalness:.9,roughness:.1})}),e.jsx(h,{args:[.06,.06,.03],rotation:[Math.PI/2,0,0],position:[0,0,.21],children:e.jsx("meshStandardMaterial",{color:n,metalness:.9,roughness:.1})})]})}),e.jsx(M,{label:"Nut (Pivot Bolt)",onHoverChange:t,children:e.jsx(h,{args:[.06,.06,.03],rotation:[Math.PI/2,0,0],position:[0,0,-1.21],children:e.jsx("meshStandardMaterial",{color:n,metalness:.9,roughness:.1})})}),e.jsxs("group",{rotation:[0,0,-o],children:[e.jsx(M,{label:"Writing Lever",onHoverChange:t,children:e.jsx("group",{rotation:[0,Math.PI,-Math.PI/2],children:e.jsxs("group",{position:[.55,0,1],children:[e.jsx(m,{args:[1.125,.08,.05],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:c,metalness:.6,roughness:.4})}),[-.3,-.05,.2,.45].map((g,x)=>e.jsx(h,{args:[.02,.02,.052],rotation:[Math.PI/2,0,0],position:[g,0,0],children:e.jsx("meshStandardMaterial",{color:"#1a1a1a"})},x))]})})}),e.jsx(M,{label:"Muscle Hook",onHoverChange:t,children:e.jsxs("group",{position:[0,0,-.15],rotation:[0,0,1.7],children:[e.jsx(h,{args:[.015,.015,.6],position:[0,-.3,0],children:e.jsx("meshStandardMaterial",{color:n,metalness:.8,roughness:.2})}),e.jsx(h,{args:[.015,.015,.15],position:[.05,-.6,0],rotation:[0,0,.8],children:e.jsx("meshStandardMaterial",{color:n,metalness:.8,roughness:.2})})]})}),e.jsx(M,{label:"Writing Point (Stylus)",onHoverChange:t,children:e.jsx("group",{position:[0,-1.1,-1],children:e.jsx(h,{args:[.012,.005,2.8],rotation:[0,0,0],position:[0,-.6,0],children:e.jsx("meshStandardMaterial",{color:"#1a1a1a"})})})})]})]})]})},me=({simTime:o,tension:t,isRunning:c,onHoverChange:i,resetKey:n})=>{const f=u.useRef(document.createElement("canvas")),g=u.useRef(null),x=u.useMemo(()=>{const l=f.current;l.width=1024,l.height=512;const v=l.getContext("2d");return v&&(v.fillStyle="#000",v.fillRect(0,0,1024,512)),new re(l)},[]);u.useEffect(()=>{const l=f.current.getContext("2d");l&&(l.fillStyle="#000",l.fillRect(0,0,1024,512),x.needsUpdate=!0),g.current=null},[n,x]),$(()=>{if(!c){g.current=null;return}const l=f.current.getContext("2d");if(!l)return;const r=1024*(Math.PI/4/(2*Math.PI)),y=50+o/W*r,s=512*.5-t*80;g.current&&(l.strokeStyle="#fff",l.lineWidth=3,l.beginPath(),l.moveTo(g.current.x,g.current.y),l.lineTo(y,s),l.stroke(),x.needsUpdate=!0),g.current={x:y,y:s}});const T=u.useRef(null);return $(()=>{if(T.current&&c){const v=o/W*(Math.PI/4);T.current.rotation.y=1.5-v}}),e.jsx(M,{label:"Kymograph",onHoverChange:i,children:e.jsxs("group",{position:[-2.071,.7,4.28],children:[e.jsx("group",{ref:T,rotation:[0,1.5,0],children:e.jsxs(h,{args:[1.2,1.2,3,64],children:[e.jsx("meshBasicMaterial",{attach:"material-0",map:x}),e.jsx("meshStandardMaterial",{attach:"material-1",color:"#111"}),e.jsx("meshStandardMaterial",{attach:"material-2",color:"#111"})]})}),e.jsx(h,{args:[.1,.1,4.5],position:[0,-.25,0],children:e.jsx("meshStandardMaterial",{color:"#1e293b"})}),e.jsx(m,{args:[1.5,.5,2],position:[0,-2.25,0],children:e.jsx("meshStandardMaterial",{color:"#0f172a"})})]})})},pe=({onBack:o})=>{const[t,c]=u.useState(3.5),[i,n]=u.useState(null),[f,g]=u.useState(0),[x,T]=u.useState("3d"),[l,v]=u.useState("muscle"),[r,y]=u.useState({time:0,isRunning:!1,mData:[],vData:[],currentMHeight:0,currentVHeight:0}),s=u.useRef(),E=u.useRef("muscle"),_=()=>{r.isRunning||(E.current=l,y(A=>({time:0,isRunning:!0,mData:l==="muscle"?[]:A.mData,vData:l==="vertebral"?[]:A.vData,currentMHeight:0,currentVHeight:0})))},C=()=>{y({time:0,isRunning:!1,mData:[],vData:[],currentMHeight:0,currentVHeight:0}),g(A=>A+1)};u.useEffect(()=>{if(!r.isRunning){s.current&&cancelAnimationFrame(s.current);return}let A=Date.now(),I=r.time;const O=E.current,P=Math.min(t/4,1),w=ae*P,L=ce*P,V=()=>{const F=Date.now(),a=F-A;if(A=F,I+=a*.2,I>W){y(d=>({...d,isRunning:!1,time:W,currentMHeight:0,currentVHeight:0}));return}const p=O==="muscle"?H(I,w,K,ne,oe):0,j=O==="vertebral"?H(I,L,Y,ie,le):0;y(d=>({...d,time:I,currentMHeight:p,currentVHeight:j,mData:O==="muscle"?[...d.mData,{t:I,y:p}]:d.mData,vData:O==="vertebral"?[...d.vData,{t:I,y:j}]:d.vData})),s.current=requestAnimationFrame(V)};return s.current=requestAnimationFrame(V),()=>{s.current&&cancelAnimationFrame(s.current)}},[r.isRunning,t]);const k=Math.max(r.currentMHeight,r.currentVHeight);return e.jsxs("div",{className:"flex flex-col h-screen bg-slate-950 text-slate-100 font-sans",children:[e.jsx("header",{className:"flex items-center justify-between px-6 py-4 bg-slate-900 border-b border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-800 rounded-lg text-slate-400",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-cyan-500 bg-clip-text text-transparent",children:"Conduction Velocity"}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Sciatic Nerve — Frog"})]})]})}),e.jsxs("main",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[e.jsxs("div",{className:"lg:hidden flex bg-slate-800 border-b border-slate-700",children:[e.jsxs("button",{onClick:()=>T("3d"),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 font-medium transition-all ${x==="3d"?"bg-slate-900 text-blue-400 border-b-2 border-blue-400":"text-slate-400 hover:text-slate-200"}`,children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:"3D View"})]}),e.jsxs("button",{onClick:()=>T("graph"),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 font-medium transition-all ${x==="graph"?"bg-slate-900 text-blue-400 border-b-2 border-blue-400":"text-slate-400 hover:text-slate-200"}`,children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"Graph View"})]})]}),e.jsxs("div",{className:`flex-1 relative bg-black ${x==="graph"?"hidden lg:flex":"flex"}`,children:[e.jsxs(Z,{shadows:!0,camera:{position:[1,2,8],fov:35},children:[e.jsx("color",{attach:"background",args:["#0f172a"]}),e.jsx(J,{preset:"city"}),e.jsx("ambientLight",{intensity:.6,color:"#ffffff"}),e.jsx("spotLight",{position:[10,10,5],angle:.3,penumbra:.5,intensity:2,castShadow:!0}),e.jsxs("group",{position:[0,-1,0],children:[e.jsxs("group",{rotation:[0,Math.PI/2,0],children:[e.jsx(xe,{muscleShortening:k,onHoverChange:n}),e.jsx(ge,{angle:k*.15,onHoverChange:n})]}),e.jsx(me,{simTime:r.time,tension:k,isRunning:r.isRunning,onHoverChange:n,resetKey:f})]}),e.jsx(Q,{makeDefault:!0,minPolarAngle:0})]}),i&&e.jsx("div",{className:"absolute top-4 left-4 bg-slate-900/90 text-white px-3 py-1.5 rounded-full text-sm border border-slate-700 backdrop-blur-sm pointer-events-none animate-in fade-in duration-200",children:i})]}),e.jsxs("div",{className:"w-full lg:w-[450px] bg-slate-900 border-l border-slate-800 flex flex-col flex-1 lg:flex-none",children:[e.jsxs("div",{className:`flex-1 p-6 min-h-0 flex flex-col border-b border-slate-800 ${x==="3d"?"hidden lg:flex":"flex"}`,children:[e.jsx("h3",{className:"text-slate-400 text-sm font-bold uppercase tracking-wider mb-4",children:"Kymograph Record"}),e.jsx("div",{className:"flex-1 bg-black rounded-lg border border-slate-800 overflow-hidden relative",children:e.jsx(de,{mData:r.mData,vData:r.vData,isRunning:r.isRunning,simTime:r.time})})]}),e.jsx("div",{className:"p-6 bg-slate-900 z-10",children:e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-xl",children:[e.jsxs("h2",{className:"text-slate-200 text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5 text-blue-400"}),"Stimulator Control"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-slate-400 text-sm font-medium mb-2 block",children:"Stimulation Point"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>v("muscle"),disabled:r.isRunning,className:`py-2 px-3 rounded-lg text-sm font-semibold transition-all border ${l==="muscle"?"bg-blue-600/20 border-blue-500 text-blue-300":"bg-slate-700/50 border-slate-600 text-slate-400 hover:border-slate-500"}`,children:"Muscle End"}),e.jsx("button",{onClick:()=>v("vertebral"),disabled:r.isRunning,className:`py-2 px-3 rounded-lg text-sm font-semibold transition-all border ${l==="vertebral"?"bg-blue-600/20 border-blue-500 text-blue-300":"bg-slate-700/50 border-slate-600 text-slate-400 hover:border-slate-500"}`,children:"Vertebral End"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:_,disabled:r.isRunning,className:`
                                            flex items-center justify-center gap-2 py-3 rounded-lg font-bold transition-all
                                            ${r.isRunning?"bg-blue-900/50 text-blue-500/50 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white shadow-[0_0_15px_rgba(59,130,246,0.4)] hover:shadow-[0_0_25px_rgba(59,130,246,0.6)] active:scale-95"}
                                        `,children:[e.jsx(se,{className:`w-5 h-5 ${r.isRunning?"":"fill-current"}`}),r.isRunning?"Running...":"STIMULATE"]}),e.jsxs("button",{onClick:C,disabled:r.isRunning,className:"flex items-center justify-center gap-2 py-3 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg font-medium transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),"Reset"]})]})]})]})})]})]})]})};export{pe as ConductionVelocity};
