import{r as h,j as e,A as U,d as V,L as X,b as G,E as K,O as q,Z as D,f as Z,k as R,V as b,B as c,C as o,S as A,T as E,u as I,n as T,g as J,e as N}from"./index-Ks9U-REk.js";import{T as Q}from"./Text-CxMwFZV8.js";const C=60,H=12,ee=14,se=5,F=(i,s)=>{const a=s==="Break"?ee:H,r=se;if(i>a)return 0;if(i<=r)return C;const n=a-r;let l=(a-i)/n;l=Math.max(0,Math.min(1,l));const u=l<.5?2*l*l:1-Math.pow(-2*l+2,2)/2,x=5;return x+(C-x)*u},j=({label:i,children:s,onHoverChange:a})=>e.jsx("group",{onPointerOver:r=>{a&&(r.stopPropagation(),a(i),document.body.style.cursor="pointer")},onPointerOut:r=>{a&&(a(null),document.body.style.cursor="auto")},children:s}),te=({position:i,rotationTarget:s,slideTarget:a})=>{const r=h.useRef(null),n=h.useRef(null);return I((l,u)=>{r.current&&(r.current.rotation.x=N.lerp(r.current.rotation.x,s,u*5)),n.current&&(n.current.position.y=N.lerp(n.current.position.y,a,u*5))}),e.jsxs("group",{position:i,children:[e.jsxs("group",{position:[0,.15,0],children:[e.jsx(c,{args:[.02,.3,.08],position:[-.035,0,0],children:e.jsx("meshStandardMaterial",{color:"#654321",metalness:.7,roughness:.4})}),e.jsx(c,{args:[.02,.3,.08],position:[.035,0,0],children:e.jsx("meshStandardMaterial",{color:"#654321",metalness:.7,roughness:.4})}),e.jsx(o,{args:[.015,.015,.1],rotation:[0,0,Math.PI/2],position:[0,.05,0],children:e.jsx("meshStandardMaterial",{color:"#c0c0c0",metalness:.8})})]}),e.jsxs("group",{ref:r,position:[0,.2,0],children:[e.jsx(A,{args:[.035,16,16],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.8,roughness:.2})}),e.jsxs("group",{ref:n,children:[e.jsx(o,{args:[.015,.015,.9],position:[0,.1,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.7,roughness:.2})}),e.jsxs("group",{position:[0,.55,0],children:[e.jsx(o,{args:[.025,.02,.12],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:"#f0f0f0",roughness:.3})}),e.jsx(A,{args:[.025,16,16],position:[0,.06,0],children:e.jsx("meshStandardMaterial",{color:"#f0f0f0",roughness:.3})})]}),e.jsxs("group",{position:[0,-.35,0],children:[e.jsx(o,{args:[.005,.015,.2],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.7,roughness:.2})}),e.jsx(o,{args:[.004,.004,.15],position:[0,-.15,0],children:e.jsx("meshStandardMaterial",{color:"#e2e8f0",metalness:.9})}),e.jsx("group",{position:[0,-.22,0],rotation:[1.5,0,0],children:e.jsx(o,{args:[.003,.003,.04],position:[0,-.02,.002],children:e.jsx("meshStandardMaterial",{color:"#e2e8f0",metalness:.9})})})]})]})]})]})},re=({mode:i})=>{const s=h.useRef(null),a="#c0c0c0",r=i==="Free-Loaded"?.2:.05;return I((n,l)=>{s.current&&(s.current.position.y=N.lerp(s.current.position.y,r,l*5))}),e.jsx("group",{position:[.1,0,-.15],rotation:[0,0,Math.PI/4],children:e.jsxs("group",{ref:s,children:[e.jsx(o,{args:[.025,.025,.25],position:[0,.125,0],children:e.jsx("meshStandardMaterial",{color:a,metalness:.9,roughness:.15})}),e.jsx(o,{args:[.05,.05,.06],position:[0,.28,0],children:e.jsx("meshStandardMaterial",{color:a,metalness:.85,roughness:.25})}),e.jsx(c,{args:[.07,.01,.015],position:[0,.311,0],children:e.jsx("meshStandardMaterial",{color:"#1a1a1a"})})]})})},ae=({distance:i,onHoverChange:s})=>{const a=h.useRef(null),r="#4A2C2A",n="#6B4423",l="#C9A227",u="#8B6914",x="#E8DCC8",m="#1C1C1C",t="#E8D58C",p=-.8+i/15*2.8;return I((g,d)=>{a.current&&(a.current.position.x=N.lerp(a.current.position.x,p,d*5))}),e.jsx(j,{label:"Du Bois-Reymond Induction Coil",onHoverChange:s,children:e.jsxs("group",{position:[2.2,-.6,.8],rotation:[0,-Math.PI/5,0],scale:.9,children:[e.jsx(c,{args:[5,.1,.85],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:r,roughness:.6})}),e.jsx(c,{args:[5.1,.06,.9],position:[0,-.08,0],children:e.jsx("meshStandardMaterial",{color:"#2D1B1B",roughness:.7})}),e.jsx(c,{args:[3.8,.015,.1],position:[.4,.058,.32],children:e.jsx("meshStandardMaterial",{color:t,roughness:.4})}),[...Array(40)].map((g,d)=>e.jsx(c,{args:[.008,.02,d%5===0?.06:.03],position:[-1.5+d*.095,.07,.32],children:e.jsx("meshStandardMaterial",{color:"#222"})},d)),e.jsx(c,{args:[4,.035,.05],position:[.3,.07,.2],children:e.jsx("meshStandardMaterial",{color:"#1a1a1a",metalness:.7,roughness:.4})}),e.jsx(c,{args:[4,.035,.05],position:[.3,.07,-.2],children:e.jsx("meshStandardMaterial",{color:"#1a1a1a",metalness:.7,roughness:.4})}),e.jsxs("group",{position:[-1.9,.25,0],children:[e.jsx(c,{args:[.2,.45,.6],position:[0,.05,0],children:e.jsx("meshStandardMaterial",{color:x,roughness:.35})}),e.jsx(o,{args:[.13,.13,.22],rotation:[0,0,Math.PI/2],position:[.02,.1,0],children:e.jsx("meshStandardMaterial",{color:n,roughness:.5})}),e.jsxs("group",{position:[.6,.1,0],children:[e.jsx(o,{args:[.06,.06,1],rotation:[0,0,Math.PI/2],children:e.jsx("meshStandardMaterial",{color:"#2C2C2C",roughness:.5})}),Array.from({length:100}).map((g,d)=>e.jsx(T,{args:[.065,.009,8,24],rotation:[0,Math.PI/2,0],position:[-.48+d*.0096,0,0],children:e.jsx("meshStandardMaterial",{color:"#B87333",metalness:.85,roughness:.2})},`coil-${d}`))]})]}),e.jsxs("group",{position:[-2.15,.06,0],children:[[-.18,.18].map((g,d)=>e.jsxs("group",{position:[.08,0,g],children:[e.jsx(o,{args:[.032,.032,.22],position:[0,.11,0],children:e.jsx("meshStandardMaterial",{color:l,metalness:.85,roughness:.15})}),e.jsx(o,{args:[.048,.048,.035],position:[0,.23,0],children:e.jsx("meshStandardMaterial",{color:l,metalness:.85,roughness:.15})}),e.jsx(o,{args:[.035,.02,.025],position:[0,.26,0],children:e.jsx("meshStandardMaterial",{color:u,metalness:.75,roughness:.25})})]},`tall-${d}`)),[-.12,.12].map((g,d)=>e.jsxs("group",{position:[-.08,0,g],children:[e.jsx(o,{args:[.022,.022,.12],position:[0,.06,0],children:e.jsx("meshStandardMaterial",{color:l,metalness:.85,roughness:.15})}),e.jsx(A,{args:[.032,12,12],position:[0,.13,0],children:e.jsx("meshStandardMaterial",{color:l,metalness:.85,roughness:.15})})]},`short-${d}`))]}),e.jsxs("group",{ref:a,position:[.3,.32,0],children:[e.jsx(T,{args:[.23,.07,16,32],rotation:[0,Math.PI/2,0],position:[-.48,0,0],children:e.jsx("meshStandardMaterial",{color:n,roughness:.5})}),e.jsx(T,{args:[.23,.07,16,32],rotation:[0,Math.PI/2,0],position:[.48,0,0],children:e.jsx("meshStandardMaterial",{color:n,roughness:.5})}),e.jsx(o,{args:[.27,.27,.9,32,1,!0],rotation:[0,0,Math.PI/2],children:e.jsx("meshStandardMaterial",{color:m,roughness:.25,metalness:.15,side:2})}),e.jsxs("group",{position:[.48,.3,0],children:[e.jsx(o,{args:[.025,.025,.08],children:e.jsx("meshStandardMaterial",{color:l,metalness:.85,roughness:.15})}),e.jsx(o,{args:[.038,.038,.025],position:[0,.05,0],children:e.jsx("meshStandardMaterial",{color:l,metalness:.85,roughness:.15})})]}),e.jsx(c,{args:[.15,.08,.5],position:[0,-.35,0],children:e.jsx("meshStandardMaterial",{color:r,roughness:.6})}),e.jsx(c,{args:[.12,.04,.45],position:[0,-.4,0],children:e.jsx("meshStandardMaterial",{color:"#2D1B1B",roughness:.7})})]}),e.jsx(Q,{position:[.5,.9,0],fontSize:.13,color:"#22d3ee",anchorX:"center",anchorY:"middle",fontWeight:"bold",children:`${i} cm`})]})})},oe=({angle:i,onHoverChange:s})=>{const a="#b8860b",r="#8b6914",n="#c0c0c0";return e.jsxs("group",{position:[-.5,1.5,.1],children:[e.jsxs("group",{position:[.3,-1.9,0],children:[e.jsx(j,{label:"Stand (Upright Post)",onHoverChange:s,children:e.jsxs("group",{position:[0,-1.5,0],children:[e.jsx(c,{args:[.6,.1,.4],position:[0,-.05,0],children:e.jsx("meshStandardMaterial",{color:r,metalness:.7,roughness:.3})}),e.jsx(o,{args:[.08,.1,2.8],position:[0,1.35,0],children:e.jsx("meshStandardMaterial",{color:n,metalness:.8,roughness:.2})})]})}),e.jsx(j,{label:"Adjustment Screw (Height Control)",onHoverChange:s,children:e.jsxs("group",{position:[0,1.35,0],children:[e.jsx(o,{args:[.06,.06,.3],children:e.jsx("meshStandardMaterial",{color:n,metalness:.9,roughness:.1})}),e.jsx(o,{args:[.1,.1,.15],position:[0,.22,0],children:e.jsx("meshStandardMaterial",{color:n,metalness:.8,roughness:.3})})]})})]}),e.jsxs("group",{position:[-.4,-.8,0],rotation:[0,0,-Math.PI/2],children:[e.jsx(j,{label:"Frame Support",onHoverChange:s,children:e.jsx(c,{args:[.12,.3,.08],position:[0,.05,-1.11],children:e.jsx("meshStandardMaterial",{color:a,metalness:.7,roughness:.3})})}),e.jsx(j,{label:"Frame Support",onHoverChange:s,children:e.jsx(c,{args:[.12,.3,.08],position:[0,.05,.11],children:e.jsx("meshStandardMaterial",{color:a,metalness:.7,roughness:.3})})}),e.jsx(j,{label:"Frame Support",onHoverChange:s,children:e.jsx(c,{args:[.12,.1,1.3],position:[0,.15,-.5],children:e.jsx("meshStandardMaterial",{color:a,metalness:.7,roughness:.3})})}),e.jsx(j,{label:"After Load Screw",onHoverChange:s,children:e.jsx(re,{mode:"Free-Loaded"})}),e.jsx(j,{label:"Pivot Bolt (Fulcrum Axis)",onHoverChange:s,children:e.jsxs("group",{children:[e.jsx(o,{args:[.04,.04,1.4],rotation:[Math.PI/2,0,0],position:[0,0,-.5],children:e.jsx("meshStandardMaterial",{color:n,metalness:.9,roughness:.1})}),e.jsx(o,{args:[.06,.06,.03],rotation:[Math.PI/2,0,0],position:[0,0,.21],children:e.jsx("meshStandardMaterial",{color:n,metalness:.9,roughness:.1})})]})}),e.jsx(j,{label:"Nut (Pivot Bolt)",onHoverChange:s,children:e.jsx(o,{args:[.06,.06,.03],rotation:[Math.PI/2,0,0],position:[0,0,-1.21],children:e.jsx("meshStandardMaterial",{color:n,metalness:.9,roughness:.1})})}),e.jsxs("group",{rotation:[0,0,-i],children:[e.jsx(j,{label:"Long Arm (Writing Lever)",onHoverChange:s,children:e.jsx("group",{rotation:[0,Math.PI,-Math.PI/2],children:e.jsxs("group",{position:[.55,0,1],children:[e.jsx(c,{args:[1.125,.08,.05],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:a,metalness:.6,roughness:.4})}),[-.3,-.05,.2,.45].map((u,x)=>e.jsx(o,{args:[.02,.02,.052],rotation:[Math.PI/2,0,0],position:[u,0,0],children:e.jsx("meshStandardMaterial",{color:"#1a1a1a"})},x))]})})}),e.jsx(j,{label:"Muscle Hook (S-shaped)",onHoverChange:s,children:e.jsxs("group",{position:[0,0,-.15],rotation:[0,0,1.7],children:[e.jsx(o,{args:[.015,.015,.6],position:[0,-.3,0],children:e.jsx("meshStandardMaterial",{color:n,metalness:.8,roughness:.2})}),e.jsx(o,{args:[.015,.015,.15],position:[.05,-.6,0],rotation:[0,0,.8],children:e.jsx("meshStandardMaterial",{color:n,metalness:.8,roughness:.2})})]})}),e.jsx(j,{label:"Writing Point (Stylus)",onHoverChange:s,children:e.jsx("group",{position:[0,-1.1,-1],children:e.jsx(o,{args:[.012,.005,2.8],rotation:[0,0,0],position:[0,-.6,0],children:e.jsx("meshStandardMaterial",{color:"#1a1a1a"})})})})]})]})]})},ne=({data:i,muscleShortening:s,tracePhase:a,distance:r,onHoverChange:n})=>{const l=h.useRef(document.createElement("canvas")),u=h.useRef(400),x=h.useMemo(()=>{const t=l.current;t.width=1024,t.height=512;const p=t.getContext("2d");return p&&(p.fillStyle="#111",p.fillRect(0,0,1024,512)),new J(t)},[]),m=h.useRef(null);return h.useEffect(()=>{const t=l.current.getContext("2d");if(t){t.fillStyle="#111",t.fillRect(0,0,1024,512);const p=50,g=40,d=400,v=3;i.forEach((k,M)=>{const S=p+M*g,w=k.make*v;t.strokeStyle="#ffffff",t.lineWidth=2,t.beginPath(),t.moveTo(S,d),t.lineTo(S,d-w),t.stroke();const P=k.break*v;t.beginPath(),t.moveTo(S+10,d),t.lineTo(S+10,d-P),t.stroke()}),x.needsUpdate=!0}u.current=400},[i,x]),h.useEffect(()=>{if(a==="Idle")return;const t=l.current.getContext("2d");if(!t)return;const p=50,g=40,d=400,v=3,k=i.length,M=p+k*g,S=a==="Make"?M:M+10,w=d-s*v;t.strokeStyle="#ffffff",t.lineWidth=2,t.beginPath(),t.moveTo(S,u.current),t.lineTo(S,w),t.stroke(),u.current=w,x.needsUpdate=!0},[s,a,i.length,x]),I(()=>{if(m.current){const g=1.5-(50+(a==="Idle"?Math.max(0,i.length-1):i.length)*40)/1024*Math.PI*2;m.current.rotation.y=N.lerp(m.current.rotation.y,g,.1)}}),e.jsx(j,{label:"Kymograph",onHoverChange:n,children:e.jsxs("group",{position:[-2.071,.7,4.28],children:[e.jsx("group",{ref:m,rotation:[0,1.5,0],children:e.jsxs(o,{args:[1.2,1.2,3,64],children:[e.jsx("meshBasicMaterial",{attach:"material-0",map:x}),e.jsx("meshStandardMaterial",{attach:"material-1",color:"#111"}),e.jsx("meshStandardMaterial",{attach:"material-2",color:"#111"})]})}),e.jsx(o,{args:[.1,.1,4.5],position:[0,-.25,0],children:e.jsx("meshStandardMaterial",{color:"#1e293b"})}),e.jsx(c,{args:[1.5,.5,2],position:[0,-2.25,0],children:e.jsx("meshStandardMaterial",{color:"#0f172a"})})]})})},ie=({muscleShortening:i,onHoverChange:s})=>{const a=h.useMemo(()=>new R([new b(-.7,.2,0),new b(-.7,.46,.3),new b(-.7,.45,.4),new b(-.9,.445,.4),new b(-.92,.3,.4)]),[]);return e.jsx(j,{label:"Lucas Chamber & Muscle",onHoverChange:s,children:e.jsxs("group",{position:[-2,0,0],children:[e.jsxs("group",{position:[0,-.5,0],children:[e.jsx(c,{args:[3.2,.2,1.5],position:[0,-.1,0],children:e.jsx("meshPhysicalMaterial",{color:"#cbd5e1",roughness:.1,transmission:.2,thickness:.5})}),e.jsx(c,{args:[3.2,1,.1],position:[0,.5,.7],children:e.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.95,opacity:1,roughness:0,thickness:.1,clearcoat:1})}),e.jsx(c,{args:[3.2,1,.1],position:[0,.5,-.7],children:e.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.95,opacity:1,roughness:0,thickness:.1,clearcoat:1})}),e.jsx(c,{args:[.1,1,1.3],position:[1.55,.5,0],children:e.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.95,opacity:1,roughness:0,thickness:.1,clearcoat:1})}),e.jsx(c,{args:[.1,1,1.3],position:[-1.55,.5,0],children:e.jsx("meshPhysicalMaterial",{color:"#ffffff",transmission:.95,opacity:1,roughness:0,thickness:.1,clearcoat:1})}),e.jsx(c,{args:[3,.8,1.3],position:[0,.4,0],children:e.jsx("meshPhysicalMaterial",{color:"#a5f3fc",transmission:.9,opacity:.6,transparent:!0,roughness:.1,ior:1.33})})]}),e.jsxs("group",{position:[0,.2,0],children:[e.jsx(o,{args:[.05,.05,.8],rotation:[0,0,1.57],position:[-1.2,0,0],children:e.jsx("meshStandardMaterial",{color:"#94a3b8"})}),e.jsx("group",{position:[-1.2,0,0],children:e.jsxs("group",{scale:[1-i*.15,1+i*.3,1+i*.3],position:[1,0,0],children:[e.jsx(A,{args:[.3,16,16],scale:[3,1,1],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:"#be123c",roughness:.6})}),e.jsx(c,{args:[1.2,.05,.05],position:[1.4,0,0],children:e.jsx("meshStandardMaterial",{color:"#f1f5f9"})})]})})]}),e.jsx(j,{label:"Stimulating Electrodes Assembly",onHoverChange:s,children:e.jsxs("group",{position:[-.8,.73,.7],rotation:[0,0,0],children:[e.jsxs("group",{position:[0,-.25,0],children:[e.jsxs("group",{children:[e.jsx(c,{args:[.3,.08,.2],position:[0,.06,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.6,roughness:.3})}),e.jsx(c,{args:[.3,.12,.06],position:[0,-.04,-.07],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.6,roughness:.3})}),e.jsx(c,{args:[.3,.12,.06],position:[0,-.04,.07],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.6,roughness:.3})})]}),e.jsxs("group",{position:[0,0,.1],rotation:[Math.PI/2,0,0],children:[e.jsx(o,{args:[.04,.04,.1],position:[0,.05,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.6,roughness:.3})}),e.jsx(o,{args:[.06,.06,.05],position:[0,.12,0],children:e.jsx("meshStandardMaterial",{color:"#111111",roughness:.7})})]})]}),e.jsx(c,{args:[.6,.12,.2],position:[0,-.09,0],children:e.jsx("meshStandardMaterial",{color:"#1e1e1e",roughness:.8})}),[-.22,.22].map((r,n)=>e.jsxs("group",{position:[r,.05,0],children:[e.jsx(o,{args:[.03,.03,.15],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.8,roughness:.2})}),e.jsx(o,{args:[.045,.045,.06],position:[0,.05,0],children:e.jsx("meshStandardMaterial",{color:"#b8860b",metalness:.8,roughness:.2})})]},`post-${n}`)),[-.08,.08].map((r,n)=>e.jsx(te,{position:[r,0,0],rotationTarget:.52,slideTarget:0},`unit-${n}`)),e.jsx(E,{args:[new R([new b(-.22,.08,0),new b(-.25,.2,.1),new b(-.35,.2,.3)]),20,.008,8,!1],children:e.jsx("meshStandardMaterial",{color:"#dc2626"})}),e.jsx(E,{args:[new R([new b(.22,.08,0),new b(.25,.2,.1),new b(.35,.2,.3)]),20,.008,8,!1],children:e.jsx("meshStandardMaterial",{color:"#1f1f1f"})})]})}),e.jsx(j,{label:"Sciatic Nerve",onHoverChange:s,children:e.jsx(E,{args:[a,64,.012,8,!1],children:e.jsx("meshStandardMaterial",{color:"#fefce8",emissive:"#fefce8",emissiveIntensity:.15,roughness:.3})})})]})})},le=({data:i})=>{const r={top:40,right:30,bottom:60,left:60};return e.jsx("div",{className:"w-full h-full bg-slate-950 rounded-xl overflow-hidden shadow-inner relative select-none border border-slate-800",children:e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 600 300",preserveAspectRatio:"xMidYMid meet",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#064e3b",strokeWidth:"1",opacity:"0.5"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"#020617"})," ",e.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),e.jsx("text",{x:600/2,y:295,fill:"#94a3b8",textAnchor:"middle",fontSize:"16",fontFamily:"monospace",children:"Distance Between Coils (cm)"}),e.jsx("text",{x:20,y:300/2,fill:"#94a3b8",textAnchor:"middle",transform:`rotate(-90, 20, ${300/2})`,fontSize:"16",fontFamily:"monospace",children:"Amplitude"}),e.jsxs("g",{transform:`translate(450, ${r.top})`,children:[e.jsx("rect",{x:"0",y:"0",width:"10",height:"10",fill:"#facc15"}),e.jsx("text",{x:"15",y:"9",fill:"#94a3b8",fontSize:"16",fontFamily:"monospace",children:"Make (M)"}),e.jsx("rect",{x:"0",y:"20",width:"10",height:"10",fill:"#f87171"}),e.jsx("text",{x:"15",y:"29",fill:"#94a3b8",fontSize:"16",fontFamily:"monospace",children:"Break (B)"})]}),e.jsxs("g",{transform:`translate(${r.left+20}, ${r.top})`,children:[e.jsx("line",{x1:"-20",y1:300-r.bottom-r.top,x2:600-r.left-r.right,y2:300-r.bottom-r.top,stroke:"#059669",strokeWidth:"2"}),i.map((n,l)=>{const x=l*70,m=300-r.bottom-r.top,t=20,p=3,g=n.make*p,d=n.break*p;return e.jsxs("g",{transform:`translate(${x}, 0)`,children:[e.jsx("line",{x1:0,y1:m,x2:0,y2:m-g,stroke:"#facc15",strokeWidth:"5",strokeLinecap:"round"}),e.jsx("line",{x1:t,y1:m,x2:t,y2:m-d,stroke:"#f87171",strokeWidth:"5",strokeLinecap:"round"}),e.jsx("text",{x:t/2,y:m+20,fill:"#e2e8f0",fontSize:"20",fontWeight:"bold",textAnchor:"middle",fontFamily:"monospace",children:n.distance}),e.jsx("text",{x:0,y:m+40,fill:"#facc15",fontSize:"16",fontWeight:"bold",textAnchor:"middle",fontFamily:"monospace",children:"M"}),e.jsx("text",{x:t,y:m+40,fill:"#f87171",fontSize:"16",fontWeight:"bold",textAnchor:"middle",fontFamily:"monospace",children:"B"})]},l)})]})]})})},he=({onBack:i})=>{const[s,a]=h.useState(15),[r,n]=h.useState([]),[l,u]=h.useState("3d"),[x,m]=h.useState(0),[t,p]=h.useState(!1),[g,d]=h.useState(null),v=h.useRef(0),[k,M]=h.useState("Idle"),[S,w]=h.useState(null),P=(f,y)=>{if(f<=0){y&&y();return}p(!0);let B=performance.now();const z=200,L=O=>{const Y=O-B,$=Math.min(Y/z,1),_=Math.sin($*Math.PI);m(_*(f/C)),$<1?v.current=requestAnimationFrame(L):(m(0),y&&y())};v.current=requestAnimationFrame(L)},W=()=>{const f=F(s,"Make"),y=F(s,"Break");w({make:f,break:y}),M("Make"),P(f,()=>{setTimeout(()=>{M("Break"),P(y,()=>{n(B=>[...B,{distance:s,make:f,break:y}]),M("Idle"),w(null),p(!1)})},300)})};return e.jsxs("div",{className:"flex flex-col h-screen bg-slate-950 text-slate-100 overflow-hidden font-sans",children:[e.jsx("div",{className:"h-14 bg-slate-900/50 border-b border-slate-800 flex items-center justify-between px-6 shrink-0 relative z-20 backdrop-blur-md",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:i,className:"p-2 hover:bg-slate-800 rounded-lg text-slate-400 hover:text-white transition-colors",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-teal-400 to-cyan-400 bg-clip-text text-transparent",children:"Effect of Stimulus Strength"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Recruitment of Motor Units â€¢ Make vs Break"})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[e.jsxs("div",{className:"lg:hidden flex bg-slate-800 border-b border-slate-700 shrink-0",children:[e.jsxs("button",{onClick:()=>u("3d"),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 font-medium transition-all ${l==="3d"?"bg-slate-900 text-cyan-400 border-b-2 border-cyan-400":"text-slate-400 hover:text-slate-200"}`,children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:"3D View"})]}),e.jsxs("button",{onClick:()=>u("graph"),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 font-medium transition-all ${l==="graph"?"bg-slate-900 text-cyan-400 border-b-2 border-cyan-400":"text-slate-400 hover:text-slate-200"}`,children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Graph"})]})]}),e.jsxs("div",{className:`flex-1 relative bg-gradient-to-b from-slate-900 to-slate-950 ${l==="graph"?"hidden lg:flex":"flex"}`,children:[g&&e.jsx("div",{className:"absolute top-4 left-4 z-10 bg-black/60 backdrop-blur-md px-4 py-2 rounded-lg border border-cyan-400/30",children:e.jsx("p",{className:"text-sm font-semibold text-cyan-300",children:g})}),e.jsxs(G,{shadows:!0,camera:{position:[1,2,8],fov:35},children:[e.jsx("color",{attach:"background",args:["#0f172a"]}),e.jsx(K,{preset:"city"}),e.jsx("ambientLight",{intensity:.6,color:"#ffffff"}),e.jsx("spotLight",{position:[10,10,5],angle:.3,penumbra:.5,intensity:2,castShadow:!0}),e.jsxs("group",{position:[0,-1,0],children:[e.jsxs("group",{rotation:[0,Math.PI/2,0],children:[e.jsx(ie,{muscleShortening:x,onHoverChange:d}),e.jsx(oe,{angle:x*.5,onHoverChange:d})]}),e.jsx(ae,{distance:s,onHoverChange:d}),e.jsx(ne,{data:r,muscleShortening:x*C,tracePhase:k,distance:s,onHoverChange:d})]}),e.jsx(q,{makeDefault:!0,minPolarAngle:0,maxDistance:15})]})]}),e.jsxs("div",{className:"w-full lg:w-[450px] flex flex-col border-l border-slate-800 bg-slate-950 shrink-0 lg:flex-none",children:[e.jsxs("div",{className:`flex-1 p-8 relative flex-col min-h-0 bg-slate-900 border-b border-slate-800 ${l==="3d"?"hidden lg:flex":"flex"}`,children:[e.jsx("h3",{className:"text-slate-400 text-sm font-bold uppercase tracking-wider mb-4",children:"Oscilloscope View"}),e.jsx("div",{className:"flex-1 h-full border border-slate-800 rounded-xl overflow-hidden relative",children:e.jsx("div",{className:"relative z-10 w-full h-full bg-black",children:e.jsx(le,{data:r})})})]}),e.jsxs("div",{className:"flex-1 p-8 bg-slate-900/40 flex flex-col justify-center",children:[e.jsxs("h3",{className:"text-sm font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-yellow-400"})," Experiment Controls"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Stimulus Strength (Coil Distance)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Voltage"}),e.jsxs("span",{className:"text-amber-400 font-mono text-base",children:[((15-s)*.33).toFixed(1)," V"]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Distance"}),e.jsxs("span",{className:"text-cyan-400 font-mono text-base bg-cyan-950/50 px-2 py-0.5 rounded border border-cyan-900/50",children:[s," cm"]})]})]})]}),e.jsx("input",{type:"range",min:"0",max:"15",step:"1",value:15-s,onChange:f=>a(15-parseFloat(f.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 mb-1"}),e.jsxs("div",{className:"flex justify-between px-1 mb-4",children:[e.jsx("span",{className:"text-[10px] text-slate-500 font-medium",children:"15 cm"}),e.jsx("span",{className:"text-[10px] text-slate-500 font-medium",children:"0 cm"})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[{label:"Sub-Threshold",val:15,active:"bg-slate-600 border-slate-400 text-white",inactive:"text-slate-400 hover:bg-slate-700"},{label:"Threshold",val:14,active:"bg-cyan-600 border-cyan-400 text-white",inactive:"text-cyan-400 hover:bg-cyan-900/30 border-cyan-900/50"},{label:"Sub-Maximal",val:9,active:"bg-blue-600 border-blue-400 text-white",inactive:"text-blue-400 hover:bg-blue-900/30 border-blue-900/50"},{label:"Maximal",val:5,active:"bg-emerald-600 border-emerald-400 text-white",inactive:"text-emerald-400 hover:bg-emerald-900/30 border-emerald-900/50"},{label:"Supra-Maximal",val:0,active:"bg-purple-600 border-purple-400 text-white",inactive:"text-purple-400 hover:bg-purple-900/30 border-purple-900/50"}].map(f=>e.jsx("button",{onClick:()=>a(f.val),className:`
                                                flex flex-col items-center justify-center p-2 rounded border transition-all duration-200 h-10 active:scale-95
                                                ${s===f.val?`${f.active} shadow-lg ring-1 ring-white/20 scale-105 z-10`:`bg-slate-800/40 border-slate-700/50 ${f.inactive}`}
                                            `,children:e.jsx("span",{className:"text-[10px] font-bold uppercase text-center leading-tight",children:f.label})},f.label))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:W,disabled:t,className:`
                                        flex-1 py-3 rounded-xl font-bold text-sm tracking-wide shadow-lg transition-all duration-200
                                        flex items-center justify-center gap-2
                                        ${t?"bg-slate-800 text-slate-500 cursor-not-allowed border border-slate-700":"bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-400 hover:to-amber-500 text-black border border-yellow-500/50 shadow-yellow-500/20 hover:shadow-yellow-500/40 active:scale-[0.98]"}
                                    `,children:[e.jsx(D,{className:`w-4 h-4 ${t?"":"fill-black"}`}),t?"Stimulating...":"Stimulate (Make & Break)"]}),e.jsxs("button",{onClick:()=>n([]),className:"px-4 py-3 rounded-xl font-bold text-sm tracking-wide shadow-lg transition-all duration-200 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white border border-slate-700 hover:border-slate-600 flex items-center gap-2",title:"Clear Graph",children:[e.jsx(Z,{className:"w-4 h-4"}),"Reset"]})]})]})]})]})]})]})};export{he as EffectOfStimulusStrength};
